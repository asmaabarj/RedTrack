<div class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
  <div class="relative top-20 mx-auto p-5 border w-[600px] shadow-lg rounded-md bg-white">
    <div class="mt-3">
      <h3 class="text-lg font-bold mb-4">Modifier l'Ã©tape</h3>
      <form [formGroup]="etapeForm" (ngSubmit)="onSubmit()">
        <div class="mb-4">
          <label class="block text-gray-700 text-sm font-bold mb-2">Titre *</label>
          <input type="text" formControlName="titre"
                 [class]="'shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline ' + 
                 (etapeForm.get('titre')?.invalid && etapeForm.get('titre')?.touched ? 'border-red-500' : '')">
          <p class="text-red-500 text-xs italic mt-1" *ngIf="etapeForm.get('titre')?.invalid && etapeForm.get('titre')?.touched">
            {{ getErrorMessage('titre') }}
          </p>
        </div>
        
        <div class="mb-4">
          <label class="block text-gray-700 text-sm font-bold mb-2">Description *</label>
          <textarea formControlName="description" rows="4"
                    [class]="'shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline ' +
                    (etapeForm.get('description')?.invalid && etapeForm.get('description')?.touched ? 'border-red-500' : '')"></textarea>
          <p class="text-red-500 text-xs italic mt-1" *ngIf="etapeForm.get('description')?.invalid && etapeForm.get('description')?.touched">
            {{ getErrorMessage('description') }}
          </p>
        </div>
        
        <div class="mb-6">
          <label class="block text-gray-700 text-sm font-bold mb-2">Date limite *</label>
          <input type="date" formControlName="deadline"
                 [min]="today"
                 [class]="'shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline ' +
                 (etapeForm.get('deadline')?.invalid && etapeForm.get('deadline')?.touched ? 'border-red-500' : '')">
          <p class="text-red-500 text-xs italic mt-1" *ngIf="etapeForm.get('deadline')?.invalid && etapeForm.get('deadline')?.touched">
            {{ getErrorMessage('deadline') }}
          </p>
        </div>
        
        <div class="flex items-center justify-between">
          <button type="submit"
                  class="bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed">
            Modifier
          </button>
          <button type="button"
                  (click)="closeModal.emit()"
                  class="bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400">
            Annuler
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
